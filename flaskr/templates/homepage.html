{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="container text-center mt-3">
    <div class="row no-gutters justify-content-center">

        {% if setup.camera_ip != '' %}
        <div class="form-group">
            <img class="camera" src="{{ setup.camera_ip }}"/>
        </div>
        {% endif %}

        <div class="col-md-4">
            <div class="container">

                <form method="POST" action="/">
                    
                    <div class="form-group">
                        <input title="Power" id="powerSliderId" class="power-slider" type="range" min="0" max="100" step="10" value="{{ rover_controller.rover.power }}" name="powerSlider" />
                        <script>
                            sliderEvents('powerSliderId', '/');
                        </script>
                    </div>
                    
                        <div id="divStatusId" class="form-group">
                            <span id="powerSliderValueId">Power: {{ rover_controller.rover.power }}% </span>
                            <br>

                            <span id="powerSliderValueId">Moving: </span>
                            <svg width="1.0625em" height="1em" viewBox="0 0 17 16" class="bi bi-exclamation-triangle hidden {% if rover_controller.rover.status == 'STOP' %} visible {% endif %}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
                                <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
                            </svg>

                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-up hidden {% if rover_controller.rover.status == 'FORWARD' %} visible-blinking {% endif %}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                            </svg> 

                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-counterclockwise hidden {% if rover_controller.rover.status == 'COUNTER-CLOCKWISE' %} visible-blinking {% endif %}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
                            </svg>

                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-clockwise hidden {% if rover_controller.rover.status == 'CLOCKWISE' %} visible-blinking {% endif %}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                            </svg>

                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-down hidden {% if rover_controller.rover.status == 'BACKWARD' %} visible-blinking {% endif %}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
                            </svg> 
                            <br>

                            <span>Connection: </span>
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-wifi-off hidden {% if rover_controller.rover.clientConnected == 0 %} visible-blinking {% endif %}" fill="red" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10.706 3.294A12.545 12.545 0 0 0 8 3 12.44 12.44 0 0 0 .663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c.63 0 1.249.05 1.852.148l.854-.854zM8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065 8.448 8.448 0 0 1 3.51-1.27L8 6zm2.596 1.404l.785-.785c.63.24 1.228.545 1.785.907a.482.482 0 0 1 .063.745.525.525 0 0 1-.652.065 8.462 8.462 0 0 0-1.98-.932zM8 10l.934-.933a6.454 6.454 0 0 1 2.012.637c.285.145.326.524.1.75l-.015.015a.532.532 0 0 1-.611.09A5.478 5.478 0 0 0 8 10zm4.905-4.905l.747-.747c.59.3 1.153.645 1.685 1.03a.485.485 0 0 1 .048.737.518.518 0 0 1-.668.05 11.496 11.496 0 0 0-1.812-1.07zM9.02 11.78c.238.14.236.464.04.66l-.706.706a.5.5 0 0 1-.708 0l-.707-.707c-.195-.195-.197-.518.04-.66A1.99 1.99 0 0 1 8 11.5c.373 0 .722.102 1.02.28zm4.355-9.905a.53.53 0 1 1 .75.75l-10.75 10.75a.53.53 0 0 1-.75-.75l10.75-10.75z"/>
                            </svg>
                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-wifi hidden {% if rover_controller.rover.clientConnected == 1 %} visible {% endif %}" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15.385 6.115a.485.485 0 0 0-.048-.736A12.443 12.443 0 0 0 8 3 12.44 12.44 0 0 0 .663 5.379a.485.485 0 0 0-.048.736.518.518 0 0 0 .668.05A11.448 11.448 0 0 1 8 4c2.507 0 4.827.802 6.717 2.164.204.148.489.13.668-.049z"/>
                                <path d="M13.229 8.271c.216-.216.194-.578-.063-.745A9.456 9.456 0 0 0 8 6c-1.905 0-3.68.56-5.166 1.526a.48.48 0 0 0-.063.745.525.525 0 0 0 .652.065A8.46 8.46 0 0 1 8 7a8.46 8.46 0 0 1 4.577 1.336c.205.132.48.108.652-.065zm-2.183 2.183c.226-.226.185-.605-.1-.75A6.472 6.472 0 0 0 8 9c-1.06 0-2.062.254-2.946.704-.285.145-.326.524-.1.75l.015.015c.16.16.408.19.611.09A5.478 5.478 0 0 1 8 10c.868 0 1.69.201 2.42.56.203.1.45.07.611-.091l.015-.015zM9.06 12.44c.196-.196.198-.52-.04-.66A1.99 1.99 0 0 0 8 11.5a1.99 1.99 0 0 0-1.02.28c-.238.14-.236.464-.04.66l.706.706a.5.5 0 0 0 .708 0l.707-.707z"/>
                            </svg>
                            <br>

                            <span>Gps: </span>
                            <a>{{ gps_controller.gps.satellites }}</a>
                            <svg fill="currentColor" height="16" viewBox="0 0 512.258 512.258" width="16" xmlns="http://www.w3.org/2000/svg"><g><path d="m30.048 278.213h-30c-2.6 125.78 108.224 236.599 234 234v-30c-112.487 0-204-91.514-204-204z"/><path d="m111.244 278.213h-30c0 84.256 68.548 152.804 152.804 152.804v-30c-67.714.001-122.804-55.089-122.804-122.804z"/><path d="m378.741 251.296-29.698 29.699-20.998-20.998 132.429-132.43c21.64-21.639 21.64-56.85 0-78.489-21.639-21.639-56.85-21.638-78.488 0l-132.43 132.43-21.149-21.149 29.698-29.698-130.661-130.661-80.609 80.61 130.66 130.661 29.698-29.699 21.149 21.149-78.188 78.188 78.489 78.488 78.188-78.188 20.998 20.998-29.698 29.698 133.514 133.515 80.61-80.61zm-289.481-170.686 38.184-38.184 88.234 88.234-38.184 38.184zm103.32 200.3 210.618-210.618c9.943-9.942 26.119-9.942 36.063 0 9.942 9.943 9.942 26.12 0 36.063l-210.618 210.617zm147.977 50.997 38.184-38.184 91.089 91.088-38.185 38.184z"/></g></svg>
                            
                        </div>

                        <div class="form-group">
                            <button title="Forward" class="btn btn-primary" type="button" name="buttonForward" id="buttonForwardId">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-up" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                                </svg> 
                            </button>
                            <script>
                                buttonEvents('buttonForwardId', '/', 'FORWARD');
                            </script>
                        </div>

                        <div class="form-group">
                            <button title="Counter-clockwise" class="btn btn-primary" type="button" name="buttonCounterClockwise" id="buttonCounterClockwiseId">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-counterclockwise" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
                                    <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
                                </svg>
                            </button>
                            <script>
                                buttonEvents('buttonCounterClockwiseId', '/', 'COUNTER-CLOCKWISE');
                            </script>

                            <button title="Stop" class="btn btn-primary" type="button" name="buttonStop" id="buttonStopId">
                                <svg width="1.0625em" height="1em" viewBox="0 0 17 16" class="bi bi-exclamation-triangle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
                                    <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
                                </svg>
                            </button>
                            <script>
                                buttonEvents('buttonStopId', '/', 'STOP');
                            </script>

                            <button title="Clockwise" class="btn btn-primary" type="button" name="buttonClockwise" id="buttonClockwiseId">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-clockwise" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                                </svg>
                            </button>
                            <script>
                                buttonEvents('buttonClockwiseId', '/', 'CLOCKWISE');
                            </script>
                        </div>

                        <div class="form-group">
                            <button title="Backward" class="btn btn-primary" type="button" name="buttonBackward" id="buttonBackwardId">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
                                </svg> 
                            </button>
                            <script>
                                buttonEvents('buttonBackwardId', '/', 'BACKWARD');
                            </script>
                        </div>
         
                </form>

            </div>
        </div>
    </div>
</div>

<div>
    <script>
        var client_keepalive_interval = {{ setup.client_keepalive_interval }};
        console.log('keepalive interval ' + client_keepalive_interval + 's.');
        window.addEventListener("load", function(){
        startKeepAlive(client_keepalive_interval);
    });
    </script>
</div>

{% endblock %}